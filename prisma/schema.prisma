// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String             @id @default(auto()) @map("_id") @db.ObjectId
  username     String?            @unique
  email        String             @unique
  password     String
  permissions  Permissions        @default(user)
  state        userState          @default(incomplete)
  registedAt   DateTime           @default(now())
  profile      Profile?           @relation(fields: [profileId], references: [id])
  contact      Contact?
  companies    Company?
  gamification GamificationRules?
  privacy      String[]

  profileId String? @db.ObjectId
  @@map("users")
}

enum Permissions {
  superadmin
  admin
  editor
  staff
  user
}

enum userState {
  incomplete
  active
  inactive
  blocked
}

model Profile {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  main_name     String
  name          String
  surname       String
  verified      Boolean  @default(false)
  profilepic    String?  @map("profile_pic")
  coverpic      String?  @map("cover_pic")
  bio           String?
  area          String[]
  intereststags String[] @map("interests_tags")
  job           String[]
  User          User[]
}

type Contact {
  whatsapp String
  phone    String?
}

type Company {
  owned String[]
}

type GamificationRules {
  points          Int
  badges          String[]
  trialexpiration DateTime @map("trial_expiration")
}
